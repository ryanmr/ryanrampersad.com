---
import Footer from "../components/footer/Footer.astro";
import { Example } from "../components/history/example";
import PageTitle from "../components/PageTitle.astro";
import Layout from "../layouts/Layout.astro";

import fsp from "node:fs/promises";
import yaml from "js-yaml";
import { getSections } from "../components/history/history";

const yml = await fsp.readFile("./src/data/history.yml", {
  encoding: "utf-8",
});
const data = yaml.load(yml);
const sections = getSections(data);
---

<Layout title="Work History" description="A history of my work">
  <PageTitle />

  <div class="mb-16">
    <h1 class="text-center text-3xl font-bold">History</h1>
  </div>

  <div class="mx-auto max-w-3xl px-4">
    <Example client:load data={sections} />
  </div>

  <Footer />
</Layout>
